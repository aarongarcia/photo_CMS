<table class="source"><tr id="line-1"><th><a href="#line-1">1</a></th><td><span class="context-markup xml xsl"><span class="declaration open close"><span class="begin">&lt;?xml</span> <span class="attribute">version=</span><span class="value">"1.0"</span> <span class="attribute">encoding=</span><span class="value">"utf-8"</span><span class="end">?&gt;</span></span></td></tr></span>
<tr id="line-2"><th><a href="#line-2">2</a></th><td><span class="context-markup xml xsl"><span class="tag open"><span class="begin">&lt;xsl:stylesheet</span> <span class="attribute">version=</span><span class="value">"1.0"</span> <span class="attribute">xmlns:xsl=</span><span class="value">"http://www.w3.org/1999/XSL/Transform"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-3"><th><a href="#line-3">3</a></th><td><span class="context-markup xml xsl"></td></tr></span>
<tr id="line-4"><th><a href="#line-4">4</a></th><td><span class="context-markup xml xsl"><span class="comment"><span class="start">&lt;!--</span></td></tr></span></span>
<tr id="line-5"><th><a href="#line-5">5</a></th><td><span class="context-markup xml xsl"><span class="comment"></td></tr></span></span>
<tr id="line-6"><th><a href="#line-6">6</a></th><td><span class="context-markup xml xsl"><span class="comment">Description:</td></tr></span></span>
<tr id="line-7"><th><a href="#line-7">7</a></th><td><span class="context-markup xml xsl"><span class="comment"></td></tr></span></span>
<tr id="line-8"><th><a href="#line-8">8</a></th><td><span class="context-markup xml xsl"><span class="comment">This is a date formatting utility. The named template "format-date" takes 2 parameters:</td></tr></span></span>
<tr id="line-9"><th><a href="#line-9">9</a></th><td><span class="context-markup xml xsl"><span class="comment"></td></tr></span></span>
<tr id="line-10"><th><a href="#line-10">10</a></th><td><span class="context-markup xml xsl"><span class="comment">1. date - [required] takes an ISO date (2005-12-01)</td></tr></span></span>
<tr id="line-11"><th><a href="#line-11">11</a></th><td><span class="context-markup xml xsl"><span class="comment">2. format - [optional] takes a format string.</td></tr></span></span>
<tr id="line-12"><th><a href="#line-12">12</a></th><td><span class="context-markup xml xsl"><span class="comment"></td></tr></span></span>
<tr id="line-13"><th><a href="#line-13">13</a></th><td><span class="context-markup xml xsl"><span class="comment">Format options:</td></tr></span></span>
<tr id="line-14"><th><a href="#line-14">14</a></th><td><span class="context-markup xml xsl"><span class="comment"></td></tr></span></span>
<tr id="line-15"><th><a href="#line-15">15</a></th><td><span class="context-markup xml xsl"><span class="comment">Y - year in 4 digits e.g. 1981, 1992, 2008</td></tr></span></span>
<tr id="line-16"><th><a href="#line-16">16</a></th><td><span class="context-markup xml xsl"><span class="comment">y - year in 2 digits e.g. 81, 92, 08</td></tr></span></span>
<tr id="line-17"><th><a href="#line-17">17</a></th><td><span class="context-markup xml xsl"><span class="comment">M - month as a full word e.g. January, March, September</td></tr></span></span>
<tr id="line-18"><th><a href="#line-18">18</a></th><td><span class="context-markup xml xsl"><span class="comment">m - month in 3 letters e.g. Jan, Mar, Sep</td></tr></span></span>
<tr id="line-19"><th><a href="#line-19">19</a></th><td><span class="context-markup xml xsl"><span class="comment">N - month in digits without leading zero</td></tr></span></span>
<tr id="line-20"><th><a href="#line-20">20</a></th><td><span class="context-markup xml xsl"><span class="comment">n - month in digits with leading zero</td></tr></span></span>
<tr id="line-21"><th><a href="#line-21">21</a></th><td><span class="context-markup xml xsl"><span class="comment">D - day with suffix and no leading zero e.g. 1st, 23rd</td></tr></span></span>
<tr id="line-22"><th><a href="#line-22">22</a></th><td><span class="context-markup xml xsl"><span class="comment">d - day in digits with leading zero e.g. 01, 09, 12, 25</td></tr></span></span>
<tr id="line-23"><th><a href="#line-23">23</a></th><td><span class="context-markup xml xsl"><span class="comment">x - day in digits with no leading zero e.g. 1, 9, 12, 25</td></tr></span></span>
<tr id="line-24"><th><a href="#line-24">24</a></th><td><span class="context-markup xml xsl"><span class="comment">T - time in 24-hours e.g. 18:30</td></tr></span></span>
<tr id="line-25"><th><a href="#line-25">25</a></th><td><span class="context-markup xml xsl"><span class="comment">t - time in 12-hours e.g. 6:30pm</td></tr></span></span>
<tr id="line-26"><th><a href="#line-26">26</a></th><td><span class="context-markup xml xsl"><span class="comment">W - weekday as a full word e.g. Monday, Tuesday</td></tr></span></span>
<tr id="line-27"><th><a href="#line-27">27</a></th><td><span class="context-markup xml xsl"><span class="comment">w - weekday in 3 letters e.g. Mon, Tue, Wed</td></tr></span></span>
<tr id="line-28"><th><a href="#line-28">28</a></th><td><span class="context-markup xml xsl"><span class="comment"></td></tr></span></span>
<tr id="line-29"><th><a href="#line-29">29</a></th><td><span class="context-markup xml xsl"><span class="comment">Examples:</td></tr></span></span>
<tr id="line-30"><th><a href="#line-30">30</a></th><td><span class="context-markup xml xsl"><span class="comment"></td></tr></span></span>
<tr id="line-31"><th><a href="#line-31">31</a></th><td><span class="context-markup xml xsl"><span class="comment">M       =&gt; January</td></tr></span></span>
<tr id="line-32"><th><a href="#line-32">32</a></th><td><span class="context-markup xml xsl"><span class="comment">d M     =&gt; 21 September</td></tr></span></span>
<tr id="line-33"><th><a href="#line-33">33</a></th><td><span class="context-markup xml xsl"><span class="comment">m D, y  =&gt; Sep 21st, 81</td></tr></span></span>
<tr id="line-34"><th><a href="#line-34">34</a></th><td><span class="context-markup xml xsl"><span class="comment">n-d-y   =&gt; 09-21-81</td></tr></span></span>
<tr id="line-35"><th><a href="#line-35">35</a></th><td><span class="context-markup xml xsl"><span class="comment">d/n/y   =&gt; 21/09/81</td></tr></span></span>
<tr id="line-36"><th><a href="#line-36">36</a></th><td><span class="context-markup xml xsl"><span class="comment">d/n/y t =&gt; 21/09/81 6:30pm</td></tr></span></span>
<tr id="line-37"><th><a href="#line-37">37</a></th><td><span class="context-markup xml xsl"><span class="comment"></td></tr></span></span>
<tr id="line-38"><th><a href="#line-38">38</a></th><td><span class="context-markup xml xsl"><span class="comment"><span class="stop">--&gt;</span></span></td></tr></span>
<tr id="line-39"><th><a href="#line-39">39</a></th><td><span class="context-markup xml xsl"></td></tr></span>
<tr id="line-40"><th><a href="#line-40">40</a></th><td><span class="context-markup xml xsl"><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"format-date"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-41"><th><a href="#line-41">41</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"date"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-42"><th><a href="#line-42">42</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"'D M, Y'"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-43"><th><a href="#line-43">43</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-44"><th><a href="#line-44">44</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"string-length(<span class="xpath">$format</span>) <span class="entity">&amp;lt;</span>= 10"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-45"><th><a href="#line-45">45</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"date-controller"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-46"><th><a href="#line-46">46</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-47"><th><a href="#line-47">47</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$format</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-48"><th><a href="#line-48">48</a></th><td><span class="context-markup xml xsl">            <span class="tag close">&lt;/xsl:call-template&gt;</span></td></tr></span>
<tr id="line-49"><th><a href="#line-49">49</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-50"><th><a href="#line-50">50</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:otherwise</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-51"><th><a href="#line-51">51</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:text</span><span class="end">&gt;</span></span>Error: format parameter is not correctly set. You have: <span class="tag close">&lt;/xsl:text&gt;</span></td></tr></span>
<tr id="line-52"><th><a href="#line-52">52</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"string-length(<span class="xpath">$format</span>)"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-53"><th><a href="#line-53">53</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:text</span><span class="end">&gt;</span></span>.<span class="tag close">&lt;/xsl:text&gt;</span></td></tr></span>
<tr id="line-54"><th><a href="#line-54">54</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:otherwise&gt;</span></td></tr></span>
<tr id="line-55"><th><a href="#line-55">55</a></th><td><span class="context-markup xml xsl">    <span class="tag close">&lt;/xsl:choose&gt;</span></td></tr></span>
<tr id="line-56"><th><a href="#line-56">56</a></th><td><span class="context-markup xml xsl"><span class="tag close">&lt;/xsl:template&gt;</span></td></tr></span>
<tr id="line-57"><th><a href="#line-57">57</a></th><td><span class="context-markup xml xsl"></td></tr></span>
<tr id="line-58"><th><a href="#line-58">58</a></th><td><span class="context-markup xml xsl"><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"date-controller"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-59"><th><a href="#line-59">59</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"date"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-60"><th><a href="#line-60">60</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-61"><th><a href="#line-61">61</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"letter"</span> <span class="attribute">select=</span><span class="value">"substring(<span class="xpath">$format</span>,1,1)"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-62"><th><a href="#line-62">62</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"tletter"</span> <span class="attribute">select=</span><span class="value">"translate(<span class="xpath">$letter</span>,'DMNYTW','dmnytw')"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-63"><th><a href="#line-63">63</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-64"><th><a href="#line-64">64</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 'y'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-65"><th><a href="#line-65">65</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-year"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-66"><th><a href="#line-66">66</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-67"><th><a href="#line-67">67</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-68"><th><a href="#line-68">68</a></th><td><span class="context-markup xml xsl">            <span class="tag close">&lt;/xsl:call-template&gt;</span></td></tr></span>
<tr id="line-69"><th><a href="#line-69">69</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-70"><th><a href="#line-70">70</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 'm'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-71"><th><a href="#line-71">71</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-month"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-72"><th><a href="#line-72">72</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-73"><th><a href="#line-73">73</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-74"><th><a href="#line-74">74</a></th><td><span class="context-markup xml xsl">            <span class="tag close">&lt;/xsl:call-template&gt;</span></td></tr></span>
<tr id="line-75"><th><a href="#line-75">75</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-76"><th><a href="#line-76">76</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 'n'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-77"><th><a href="#line-77">77</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-month"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-78"><th><a href="#line-78">78</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-79"><th><a href="#line-79">79</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-80"><th><a href="#line-80">80</a></th><td><span class="context-markup xml xsl">            <span class="tag close">&lt;/xsl:call-template&gt;</span></td></tr></span>
<tr id="line-81"><th><a href="#line-81">81</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-82"><th><a href="#line-82">82</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 'd'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-83"><th><a href="#line-83">83</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-day"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-84"><th><a href="#line-84">84</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-85"><th><a href="#line-85">85</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-86"><th><a href="#line-86">86</a></th><td><span class="context-markup xml xsl">            <span class="tag close">&lt;/xsl:call-template&gt;</span></td></tr></span>
<tr id="line-87"><th><a href="#line-87">87</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-88"><th><a href="#line-88">88</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 'x'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-89"><th><a href="#line-89">89</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-day"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-90"><th><a href="#line-90">90</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-91"><th><a href="#line-91">91</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-92"><th><a href="#line-92">92</a></th><td><span class="context-markup xml xsl">            <span class="tag close">&lt;/xsl:call-template&gt;</span></td></tr></span>
<tr id="line-93"><th><a href="#line-93">93</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-94"><th><a href="#line-94">94</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 't'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-95"><th><a href="#line-95">95</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-time"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-96"><th><a href="#line-96">96</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"time"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>/@time"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-97"><th><a href="#line-97">97</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-98"><th><a href="#line-98">98</a></th><td><span class="context-markup xml xsl">            <span class="tag close">&lt;/xsl:call-template&gt;</span></td></tr></span>
<tr id="line-99"><th><a href="#line-99">99</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-100"><th><a href="#line-100">100</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$tletter</span> = 'w'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-101"><th><a href="#line-101">101</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"format-weekday"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-102"><th><a href="#line-102">102</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"weekday"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>/@weekday"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-103"><th><a href="#line-103">103</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-104"><th><a href="#line-104">104</a></th><td><span class="context-markup xml xsl">            <span class="tag close">&lt;/xsl:call-template&gt;</span></td></tr></span>
<tr id="line-105"><th><a href="#line-105">105</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-106"><th><a href="#line-106">106</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:otherwise</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-107"><th><a href="#line-107">107</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$letter</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-108"><th><a href="#line-108">108</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:otherwise&gt;</span></td></tr></span>
<tr id="line-109"><th><a href="#line-109">109</a></th><td><span class="context-markup xml xsl">    <span class="tag close">&lt;/xsl:choose&gt;</span></td></tr></span>
<tr id="line-110"><th><a href="#line-110">110</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:if</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$letter</span> = not('')"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-111"><th><a href="#line-111">111</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:call-template</span> <span class="attribute">name=</span><span class="value">"date-controller"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-112"><th><a href="#line-112">112</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"date"</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$date</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-113"><th><a href="#line-113">113</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:with-param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"substring(<span class="xpath">$format</span>,2)"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-114"><th><a href="#line-114">114</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:call-template&gt;</span></td></tr></span>
<tr id="line-115"><th><a href="#line-115">115</a></th><td><span class="context-markup xml xsl">    <span class="tag close">&lt;/xsl:if&gt;</span></td></tr></span>
<tr id="line-116"><th><a href="#line-116">116</a></th><td><span class="context-markup xml xsl"><span class="tag close">&lt;/xsl:template&gt;</span></td></tr></span>
<tr id="line-117"><th><a href="#line-117">117</a></th><td><span class="context-markup xml xsl"></td></tr></span>
<tr id="line-118"><th><a href="#line-118">118</a></th><td><span class="context-markup xml xsl"><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"format-year"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-119"><th><a href="#line-119">119</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"date"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-120"><th><a href="#line-120">120</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"year"</span> <span class="attribute">select=</span><span class="value">"substring(<span class="xpath">$date</span>,1,4)"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-121"><th><a href="#line-121">121</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"'y'"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-122"><th><a href="#line-122">122</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-123"><th><a href="#line-123">123</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'y'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-124"><th><a href="#line-124">124</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"substring(<span class="xpath">$year</span>,3)"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-125"><th><a href="#line-125">125</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-126"><th><a href="#line-126">126</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'Y'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-127"><th><a href="#line-127">127</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$year</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-128"><th><a href="#line-128">128</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-129"><th><a href="#line-129">129</a></th><td><span class="context-markup xml xsl">    <span class="tag close">&lt;/xsl:choose&gt;</span></td></tr></span>
<tr id="line-130"><th><a href="#line-130">130</a></th><td><span class="context-markup xml xsl"><span class="tag close">&lt;/xsl:template&gt;</span></td></tr></span>
<tr id="line-131"><th><a href="#line-131">131</a></th><td><span class="context-markup xml xsl"></td></tr></span>
<tr id="line-132"><th><a href="#line-132">132</a></th><td><span class="context-markup xml xsl"><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"format-month"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-133"><th><a href="#line-133">133</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"date"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-134"><th><a href="#line-134">134</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"month"</span> <span class="attribute">select=</span><span class="value">"format-number(substring(<span class="xpath">$date</span>,6,2), '##')"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-135"><th><a href="#line-135">135</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"'m'"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-136"><th><a href="#line-136">136</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"month-word"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-137"><th><a href="#line-137">137</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-138"><th><a href="#line-138">138</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 01"</span><span class="end">&gt;</span></span>January<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-139"><th><a href="#line-139">139</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 02"</span><span class="end">&gt;</span></span>February<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-140"><th><a href="#line-140">140</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 03"</span><span class="end">&gt;</span></span>March<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-141"><th><a href="#line-141">141</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 04"</span><span class="end">&gt;</span></span>April<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-142"><th><a href="#line-142">142</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 05"</span><span class="end">&gt;</span></span>May<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-143"><th><a href="#line-143">143</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 06"</span><span class="end">&gt;</span></span>June<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-144"><th><a href="#line-144">144</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 07"</span><span class="end">&gt;</span></span>July<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-145"><th><a href="#line-145">145</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 08"</span><span class="end">&gt;</span></span>August<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-146"><th><a href="#line-146">146</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 09"</span><span class="end">&gt;</span></span>September<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-147"><th><a href="#line-147">147</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 10"</span><span class="end">&gt;</span></span>October<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-148"><th><a href="#line-148">148</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 11"</span><span class="end">&gt;</span></span>November<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-149"><th><a href="#line-149">149</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$month</span> = 12"</span><span class="end">&gt;</span></span>December<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-150"><th><a href="#line-150">150</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:choose&gt;</span></td></tr></span>
<tr id="line-151"><th><a href="#line-151">151</a></th><td><span class="context-markup xml xsl">    <span class="tag close">&lt;/xsl:param&gt;</span></td></tr></span>
<tr id="line-152"><th><a href="#line-152">152</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-153"><th><a href="#line-153">153</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'm'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-154"><th><a href="#line-154">154</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"substring(<span class="xpath">$month-word</span>, 1,3)"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-155"><th><a href="#line-155">155</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-156"><th><a href="#line-156">156</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'M'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-157"><th><a href="#line-157">157</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$month-word</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-158"><th><a href="#line-158">158</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-159"><th><a href="#line-159">159</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'n'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-160"><th><a href="#line-160">160</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"format-number(<span class="xpath">$month</span>, '00')"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-161"><th><a href="#line-161">161</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-162"><th><a href="#line-162">162</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'N'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-163"><th><a href="#line-163">163</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"format-number(<span class="xpath">$month</span>, '0')"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-164"><th><a href="#line-164">164</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-165"><th><a href="#line-165">165</a></th><td><span class="context-markup xml xsl">    <span class="tag close">&lt;/xsl:choose&gt;</span></td></tr></span>
<tr id="line-166"><th><a href="#line-166">166</a></th><td><span class="context-markup xml xsl"><span class="tag close">&lt;/xsl:template&gt;</span></td></tr></span>
<tr id="line-167"><th><a href="#line-167">167</a></th><td><span class="context-markup xml xsl"></td></tr></span>
<tr id="line-168"><th><a href="#line-168">168</a></th><td><span class="context-markup xml xsl"><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"format-day"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-169"><th><a href="#line-169">169</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"date"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-170"><th><a href="#line-170">170</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"day"</span> <span class="attribute">select=</span><span class="value">"format-number(substring(<span class="xpath">$date</span>,9,2),'00')"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-171"><th><a href="#line-171">171</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"'d'"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-172"><th><a href="#line-172">172</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"suffix"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-173"><th><a href="#line-173">173</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-174"><th><a href="#line-174">174</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"(substring(<span class="xpath">$day</span>,2) = 1) and not(substring(<span class="xpath">$day</span>,1,1) = 1)"</span><span class="end">&gt;</span></span>st<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-175"><th><a href="#line-175">175</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"(substring(<span class="xpath">$day</span>,2) = 2) and not(substring(<span class="xpath">$day</span>,1,1) = 1)"</span><span class="end">&gt;</span></span>nd<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-176"><th><a href="#line-176">176</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"(substring(<span class="xpath">$day</span>,2) = 3) and not(substring(<span class="xpath">$day</span>,1,1) = 1)"</span><span class="end">&gt;</span></span>rd<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-177"><th><a href="#line-177">177</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:otherwise</span><span class="end">&gt;</span></span>th<span class="tag close">&lt;/xsl:otherwise&gt;</span></td></tr></span>
<tr id="line-178"><th><a href="#line-178">178</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:choose&gt;</span></td></tr></span>
<tr id="line-179"><th><a href="#line-179">179</a></th><td><span class="context-markup xml xsl">    <span class="tag close">&lt;/xsl:param&gt;</span></td></tr></span>
<tr id="line-180"><th><a href="#line-180">180</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-181"><th><a href="#line-181">181</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'd'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-182"><th><a href="#line-182">182</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$day</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-183"><th><a href="#line-183">183</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-184"><th><a href="#line-184">184</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'x'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-185"><th><a href="#line-185">185</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"format-number(<span class="xpath">$day</span>,'0')"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-186"><th><a href="#line-186">186</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-187"><th><a href="#line-187">187</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'D'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-188"><th><a href="#line-188">188</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"format-number(<span class="xpath">$day</span>,'0')"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-189"><th><a href="#line-189">189</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$suffix</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-190"><th><a href="#line-190">190</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-191"><th><a href="#line-191">191</a></th><td><span class="context-markup xml xsl">    <span class="tag close">&lt;/xsl:choose&gt;</span></td></tr></span>
<tr id="line-192"><th><a href="#line-192">192</a></th><td><span class="context-markup xml xsl"><span class="tag close">&lt;/xsl:template&gt;</span></td></tr></span>
<tr id="line-193"><th><a href="#line-193">193</a></th><td><span class="context-markup xml xsl"></td></tr></span>
<tr id="line-194"><th><a href="#line-194">194</a></th><td><span class="context-markup xml xsl"><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"format-time"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-195"><th><a href="#line-195">195</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"time"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-196"><th><a href="#line-196">196</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"hour"</span> <span class="attribute">select=</span><span class="value">"substring-before(<span class="xpath">$time</span>, ':')"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-197"><th><a href="#line-197">197</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"minute"</span> <span class="attribute">select=</span><span class="value">"substring-after(<span class="xpath">$time</span>, ':')"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-198"><th><a href="#line-198">198</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"'T'"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-199"><th><a href="#line-199">199</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-200"><th><a href="#line-200">200</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'T'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-201"><th><a href="#line-201">201</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$time</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-202"><th><a href="#line-202">202</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-203"><th><a href="#line-203">203</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 't'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-204"><th><a href="#line-204">204</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-205"><th><a href="#line-205">205</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$hour</span> mod 12 = 0"</span><span class="end">&gt;</span></span>12<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-206"><th><a href="#line-206">206</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:otherwise</span><span class="end">&gt;</span></span><span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"(<span class="xpath">$hour</span> mod 12)"</span><span class="end">/&gt;</span></span><span class="tag close">&lt;/xsl:otherwise&gt;</span></td></tr></span>
<tr id="line-207"><th><a href="#line-207">207</a></th><td><span class="context-markup xml xsl">            <span class="tag close">&lt;/xsl:choose&gt;</span></td></tr></span>
<tr id="line-208"><th><a href="#line-208">208</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"concat(':',<span class="xpath">$minute</span>)"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-209"><th><a href="#line-209">209</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-210"><th><a href="#line-210">210</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$hour</span> <span class="entity">&amp;lt;</span> 12"</span><span class="end">&gt;</span></span>am<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-211"><th><a href="#line-211">211</a></th><td><span class="context-markup xml xsl">                <span class="tag open"><span class="begin">&lt;xsl:otherwise</span><span class="end">&gt;</span></span>pm<span class="tag close">&lt;/xsl:otherwise&gt;</span></td></tr></span>
<tr id="line-212"><th><a href="#line-212">212</a></th><td><span class="context-markup xml xsl">            <span class="tag close">&lt;/xsl:choose&gt;</span></td></tr></span>
<tr id="line-213"><th><a href="#line-213">213</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-214"><th><a href="#line-214">214</a></th><td><span class="context-markup xml xsl">    <span class="tag close">&lt;/xsl:choose&gt;</span></td></tr></span>
<tr id="line-215"><th><a href="#line-215">215</a></th><td><span class="context-markup xml xsl"><span class="tag close">&lt;/xsl:template&gt;</span></td></tr></span>
<tr id="line-216"><th><a href="#line-216">216</a></th><td><span class="context-markup xml xsl"></td></tr></span>
<tr id="line-217"><th><a href="#line-217">217</a></th><td><span class="context-markup xml xsl"><span class="tag open"><span class="begin">&lt;xsl:template</span> <span class="attribute">name=</span><span class="value">"format-weekday"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-218"><th><a href="#line-218">218</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"weekday"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-219"><th><a href="#line-219">219</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"format"</span> <span class="attribute">select=</span><span class="value">"'w'"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-220"><th><a href="#line-220">220</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:param</span> <span class="attribute">name=</span><span class="value">"result"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-221"><th><a href="#line-221">221</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-222"><th><a href="#line-222">222</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 1"</span><span class="end">&gt;</span></span>Monday<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-223"><th><a href="#line-223">223</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 2"</span><span class="end">&gt;</span></span>Tuesday<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-224"><th><a href="#line-224">224</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 3"</span><span class="end">&gt;</span></span>Wednesday<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-225"><th><a href="#line-225">225</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 4"</span><span class="end">&gt;</span></span>Thursday<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-226"><th><a href="#line-226">226</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 5"</span><span class="end">&gt;</span></span>Friday<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-227"><th><a href="#line-227">227</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 6"</span><span class="end">&gt;</span></span>Saturday<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-228"><th><a href="#line-228">228</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$weekday</span> = 7"</span><span class="end">&gt;</span></span>Sunday<span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-229"><th><a href="#line-229">229</a></th><td><span class="context-markup xml xsl">    <span class="tag close">&lt;/xsl:choose&gt;</span></td></tr></span>
<tr id="line-230"><th><a href="#line-230">230</a></th><td><span class="context-markup xml xsl">    <span class="tag close">&lt;/xsl:param&gt;</span></td></tr></span>
<tr id="line-231"><th><a href="#line-231">231</a></th><td><span class="context-markup xml xsl">    <span class="tag open"><span class="begin">&lt;xsl:choose</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-232"><th><a href="#line-232">232</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'W'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-233"><th><a href="#line-233">233</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"<span class="xpath">$result</span>"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-234"><th><a href="#line-234">234</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-235"><th><a href="#line-235">235</a></th><td><span class="context-markup xml xsl">        <span class="tag open"><span class="begin">&lt;xsl:when</span> <span class="attribute">test=</span><span class="value">"<span class="xpath">$format</span> = 'w'"</span><span class="end">&gt;</span></span></td></tr></span>
<tr id="line-236"><th><a href="#line-236">236</a></th><td><span class="context-markup xml xsl">            <span class="tag open"><span class="begin">&lt;xsl:value-of</span> <span class="attribute">select=</span><span class="value">"substring(<span class="xpath">$result</span>,1,3)"</span><span class="end">/&gt;</span></span></td></tr></span>
<tr id="line-237"><th><a href="#line-237">237</a></th><td><span class="context-markup xml xsl">        <span class="tag close">&lt;/xsl:when&gt;</span></td></tr></span>
<tr id="line-238"><th><a href="#line-238">238</a></th><td><span class="context-markup xml xsl">    <span class="tag close">&lt;/xsl:choose&gt;</span></td></tr></span>
<tr id="line-239"><th><a href="#line-239">239</a></th><td><span class="context-markup xml xsl"><span class="tag close">&lt;/xsl:template&gt;</span></td></tr></span>
<tr id="line-240"><th><a href="#line-240">240</a></th><td><span class="context-markup xml xsl"></td></tr></span>
<tr id="line-241"><th><a href="#line-241">241</a></th><td><span class="context-markup xml xsl"><span class="tag close">&lt;/xsl:stylesheet&gt;</span></span></td></tr></table>